# Система модерації Pidrobitok

## Огляд

Система модерації забезпечує контроль якості та безпеки контенту на платформі Pidrobitok. Вона включає в себе модерацію вакансій, обробку скарг, керування користувачами та ведення історії дій модераторів.

## Компоненти

### 1. ModerationDashboard.jsx
Головна панель модерації з трьома основними розділами:

- **Вакансії на модерації** - перегляд та схвалення/відхилення нових вакансій
- **Скарги користувачів** - обробка скарг на контент та користувачів
- **Керування користувачами** - блокування, попередження та управління акаунтами

**Основні функції:**
- Схвалення/відхилення вакансій з обов'язковим вказанням причини
- Вирішення скарг та розслідування порушень
- Блокування користувачів та надсилання попереджень
- Перегляд статистики модерації
- Фільтрація та пошук

### 2. ModerationHistory.jsx
Компонент для перегляду історії всіх дій модераторів:

- **Timeline** - хронологічний перегляд дій
- **Фільтри** - пошук за типом дії, об'єктом, періодом
- **Детальний перегляд** - повна інформація про кожну дію
- **Експорт** - можливість експорту даних

### 3. ModerationFilters.jsx
Розширені фільтри для всіх компонентів модерації:

- **Основні фільтри** - статус, пріоритет, тип об'єкта, період
- **Фільтри вакансій** - компанія, місце роботи, зарплата, досвід
- **Фільтри користувачів** - роль, статус акаунту, кількість порушень
- **Розширені фільтри** - підозрілі слова, активні скарги, термінові

## API Endpoints

### Вакансії
- `GET /moderation/review/jobs` - отримання вакансій для модерації
- `POST /moderation/approve/{id}` - схвалення вакансії
- `POST /moderation/reject/{id}` - відхилення вакансії
- `PUT /moderation/edit/{id}` - редагування вакансії

### Скарги
- `GET /complaints` - отримання скарг
- `POST /complaints/resolve/{id}` - вирішення скарги
- `POST /complaints/investigate/{id}` - розслідування скарги

### Користувачі
- `GET /moderation/users` - отримання користувачів
- `POST /user/block/{id}` - блокування користувача
- `POST /user/unblock/{id}` - розблокування користувача
- `POST /user/warn/{id}` - попередження користувача

### Історія та статистика
- `GET /moderation/history` - історія модерації
- `GET /moderation/stats` - статистика модерації
- `GET /moderation/export` - експорт даних

## Статуси та пріоритети

### Статуси вакансій
- `pending` - На розгляді
- `approved` - Схвалена
- `rejected` - Відхилена
- `investigating` - Розслідується

### Пріоритети
- `high` - Високий (червоний)
- `medium` - Середній (помаранчевий)
- `low` - Низький (зелений)

### Статуси користувачів
- `active` - Активний
- `warning` - Попередження
- `blocked` - Заблокований
- `suspended` - Призупинений

## Типи дій модерації

### Вакансії
- `approve` - Схвалення
- `reject` - Відхилення
- `edit` - Редагування

### Скарги
- `resolve` - Вирішення
- `investigate` - Розслідування

### Користувачі
- `warn` - Попередження
- `block` - Блокування
- `unblock` - Розблокування

## Безпека та права доступу

### Ролі користувачів
- `moderator` - Модератор (базові права модерації)
- `admin` - Адміністратор (повні права)

### Захищені маршрути
```jsx
<Route 
  path="/moderation" 
  element={
    <ProtectedRoute allowedRoles={['moderator', 'admin']}>
      <ModerationDashboard />
    </ProtectedRoute>
  } 
/>
```

## Інтеграція з іншими сервісами

### JobService
- Зміна статусу вакансій після модерації
- Отримання деталей вакансій для перегляду

### AuthService
- Блокування/розблокування користувачів
- Перевірка прав доступу

### NotificationService
- Надсилання повідомлень про дії модератора
- Сповіщення роботодавців та студентів

## Автоматична модерація

### Функції автодерації
- Перевірка на заборонені слова
- Аналіз підозрілого контенту
- Виявлення спаму
- Попередня оцінка пріоритету

### Налаштування
- Список заборонених слів
- Правила автоматичного схвалення/відхилення
- Пороги для ручної перевірки

## Використання

### Запуск модерації
1. Увійдіть як модератор або адміністратор
2. Перейдіть на `/moderation`
3. Виберіть потрібний розділ (Вакансії/Скарги/Користувачі)

### Схвалення вакансії
1. Перегляньте деталі вакансії
2. Натисніть "Схвалити"
3. Вкажіть причину схвалення
4. Підтвердіть дію

### Обробка скарги
1. Відкрийте скаргу
2. Перегляньте докази та опис
3. Виберіть дію (вирішити/розслідувати)
4. Вкажіть причину та рішення

### Блокування користувача
1. Знайдіть користувача
2. Натисніть "Заблокувати"
3. Вкажіть причину та тривалість блокування
4. Підтвердіть дію

## Налаштування

### Конфігурація фільтрів
```javascript
const defaultFilters = {
  status: 'all',
  priority: 'all',
  targetType: 'all',
  dateRange: 'all',
  flaggedWords: false,
  hasComplaints: false,
  salaryRange: [0, 10000],
  experienceLevel: 'all'
};
```

### Налаштування API
```javascript
const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api';
```

## Розширення функціоналу

### Додавання нових типів дій
1. Додайте новий тип в `getActionIcon()` та `getActionColor()`
2. Оновіть API endpoints
3. Додайте відповідні кнопки в UI

### Додавання нових фільтрів
1. Розширте об'єкт фільтрів
2. Додайте UI елементи в ModerationFilters
3. Оновіть логіку фільтрації

### Інтеграція з зовнішніми сервісами
1. Додайте нові методи в moderationService
2. Створіть відповідні компоненти
3. Оновіть маршрутизацію

## Тестування

### Unit тести
- Тестування логіки фільтрації
- Тестування API викликів
- Тестування валідації форм

### Integration тести
- Тестування повного workflow модерації
- Тестування інтеграції з іншими сервісами
- Тестування прав доступу

### E2E тести
- Тестування користувацьких сценаріїв
- Тестування UI взаємодії
- Тестування продуктивності

## Підтримка

### Логування
Всі дії модераторів логуються з детальною інформацією:
- Дата та час
- Модератор
- Дія
- Об'єкт
- Причина

### Моніторинг
- Відстеження продуктивності модераторів
- Аналіз типів порушень
- Статистика схвалень/відхилень

### Зворотній зв'язок
- Система оцінки рішень модераторів
- Апеляції на рішення
- Покращення процесу модерації 